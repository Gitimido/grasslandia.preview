import{a as te,b as ne}from"./chunk-YQK6ONJR.js";import{c as S}from"./chunk-3SCB5KN2.js";import"./chunk-5FDPCJE3.js";import{$ as c,G as v,J as O,K as y,L as $,La as ee,Lb as j,M as H,Ma as C,O as J,Pa as _,T as K,V as s,W as g,Ya as k,Z as m,aa as Q,ba as h,bb as I,cb as M,db as T,ea as t,eb as E,fa as n,ga as u,gb as z,ha as W,hb as F,ia as X,ib as A,ja as w,jb as D,ka as p,kb as N,la as d,lb as U,ra as a,sa as b,ta as Z,v as P,za as x}from"./chunk-UPP2GHVQ.js";import"./chunk-ZQOO3JOD.js";import"./chunk-HMJPAHNJ.js";function ae(o,r){o&1&&(t(0,"div",29),a(1," Full name is required "),n())}function se(o,r){o&1&&(t(0,"span"),a(1,"Username is required"),n())}function ce(o,r){o&1&&(t(0,"span"),a(1,"Username must be at least 3 characters"),n())}function le(o,r){if(o&1&&(t(0,"div",29),m(1,se,2,0,"span",27)(2,ce,2,0,"span",27),n()),o&2){let e,i,l=d();s(),c("ngIf",(e=l.profileForm.get("username"))==null||e.errors==null?null:e.errors.required),s(),c("ngIf",(i=l.profileForm.get("username"))==null||i.errors==null?null:i.errors.minlength)}}function pe(o,r){if(o&1&&(t(0,"div",30),a(1),n()),o&2){let e=d();s(),b(e.errorMessage)}}function de(o,r){if(o&1&&(t(0,"div",31),a(1),n()),o&2){let e=d();s(),b(e.successMessage)}}function me(o,r){o&1&&(t(0,"span"),a(1,"Save Changes"),n())}function ge(o,r){o&1&&u(0,"span",32)}var Y=class o{constructor(r,e){this.fb=r;this.userService=e;this.profileForm=this.fb.group({fullName:["",M.required],username:["",[M.required,M.minLength(3)]],bio:[""]})}user=null;profileForm;isSubmitting=!1;errorMessage="";successMessage="";ngOnInit(){this.user&&this.profileForm.patchValue({fullName:this.user.fullName||"",username:this.user.username||"",bio:this.user.bio||""})}onProfilePictureChanged(r){if(!this.user)return;let e=r?.url||null;this.user&&(this.user.avatarUrl=e??void 0),this.userService.updateUserProfilePicture(this.user.id,e).subscribe({next:i=>{i&&(this.successMessage="Profile picture updated successfully",setTimeout(()=>{this.successMessage=""},3e3))},error:i=>{console.error("Error updating profile picture:",i),this.errorMessage="Failed to update profile picture",setTimeout(()=>{this.errorMessage=""},3e3)}})}onSubmit(){if(this.profileForm.invalid||!this.user)return;this.isSubmitting=!0,this.errorMessage="",this.successMessage="";let r={fullName:this.profileForm.value.fullName,username:this.profileForm.value.username,bio:this.profileForm.value.bio};this.userService.updateUserProfile(this.user.id,r).pipe(P(()=>this.isSubmitting=!1)).subscribe({next:e=>{e&&this.user&&(this.user.fullName=e.fullName,this.user.username=e.username,this.user.bio=e.bio,this.successMessage="Profile updated successfully",setTimeout(()=>{this.successMessage=""},3e3))},error:e=>{console.error("Error updating profile:",e),this.errorMessage="Failed to update profile"}})}static \u0275fac=function(e){return new(e||o)(g(D),g(S))};static \u0275cmp=v({type:o,selectors:[["app-profile-settings"]],inputs:{user:"user"},standalone:!0,features:[x],decls:42,vars:9,consts:[[1,"profile-settings"],[1,"profile-picture-section"],[1,"profile-picture-container"],[1,"current-picture"],["alt","Profile picture",3,"src"],[1,"picture-overlay"],[1,"camera-icon-wrapper"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"camera-icon"],["d","M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"],["cx","12","cy","13","r","4"],[1,"hidden-uploader"],[3,"pictureChanged"],[1,"upload-instructions"],[1,"file-requirements"],[1,"profile-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","fullName"],["type","text","id","fullName","formControlName","fullName","placeholder","Your full name"],["class","error-message",4,"ngIf"],["for","username"],["type","text","id","username","formControlName","username","placeholder","Your username"],["for","bio"],["id","bio","formControlName","bio","placeholder","Tell us about yourself","rows","3"],["class","error-alert",4,"ngIf"],["class","success-alert",4,"ngIf"],[1,"form-actions"],["type","submit",1,"save-btn",3,"disabled"],[4,"ngIf"],["class","spinner",4,"ngIf"],[1,"error-message"],[1,"error-alert"],[1,"success-alert"],[1,"spinner"]],template:function(e,i){if(e&1&&(t(0,"div",0)(1,"h3"),a(2,"Profile Settings"),n(),t(3,"div",1)(4,"h4"),a(5,"Profile Picture"),n(),t(6,"div",2)(7,"div",3),u(8,"img",4),t(9,"div",5)(10,"div",6),$(),t(11,"svg",7),u(12,"path",8)(13,"circle",9),n()()(),H(),t(14,"div",10)(15,"app-profile-picture-uploader",11),p("pictureChanged",function(f){return i.onProfilePictureChanged(f)}),n()()(),t(16,"div",12)(17,"p"),a(18,"Click on your profile picture to upload a new one"),n(),t(19,"p",13),a(20,"JPG, PNG or GIF. Max size 5MB."),n()()()(),t(21,"form",14),p("ngSubmit",function(){return i.onSubmit()}),t(22,"div",15)(23,"label",16),a(24,"Full Name"),n(),u(25,"input",17),m(26,ae,2,0,"div",18),n(),t(27,"div",15)(28,"label",19),a(29,"Username"),n(),u(30,"input",20),m(31,le,3,2,"div",18),n(),t(32,"div",15)(33,"label",21),a(34,"Bio"),n(),u(35,"textarea",22),n(),m(36,pe,2,1,"div",23)(37,de,2,1,"div",24),t(38,"div",25)(39,"button",26),m(40,me,2,0,"span",27)(41,ge,1,0,"span",28),n()()()()),e&2){let l,f;s(8),c("src",(i.user==null?null:i.user.avatarUrl)||"/assets/default-avatar.png",K),s(13),c("formGroup",i.profileForm),s(5),c("ngIf",((l=i.profileForm.get("fullName"))==null?null:l.invalid)&&((l=i.profileForm.get("fullName"))==null?null:l.touched)),s(5),c("ngIf",((f=i.profileForm.get("username"))==null?null:f.invalid)&&((f=i.profileForm.get("username"))==null?null:f.touched)),s(5),c("ngIf",i.errorMessage),s(),c("ngIf",i.successMessage),s(2),c("disabled",i.profileForm.invalid||i.isSubmitting),s(),c("ngIf",!i.isSubmitting),s(),c("ngIf",i.isSubmitting)}},dependencies:[_,C,N,z,I,T,E,U,F,A,te],styles:[".profile-settings[_ngcontent-%COMP%]{max-width:600px;animation:_ngcontent-%COMP%_fadeIn .3s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.profile-picture-section[_ngcontent-%COMP%]{margin-bottom:24px;padding-bottom:24px;border-bottom:1px solid var(--border-color)}h3[_ngcontent-%COMP%]{font-size:24px;font-weight:600;margin-bottom:24px;color:var(--text-color)}h4[_ngcontent-%COMP%]{font-size:18px;font-weight:500;margin-bottom:16px;color:var(--text-color)}.profile-picture-container[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:24px}.current-picture[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:var(--radius-full);overflow:hidden;border:var(--avatar-border);box-shadow:var(--shadow);position:relative;cursor:pointer}.current-picture[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.current-picture[_ngcontent-%COMP%]:hover   .picture-overlay[_ngcontent-%COMP%]{opacity:1}.picture-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;justify-content:center;align-items:center;opacity:0;transition:opacity .2s ease}.camera-icon-wrapper[_ngcontent-%COMP%]{width:32px;height:32px;display:flex;justify-content:center;align-items:center}.camera-icon[_ngcontent-%COMP%]{width:100%;height:100%;color:#fff}.hidden-uploader[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;z-index:10}.upload-instructions[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}.upload-instructions[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--text-color);font-size:14px}.upload-instructions[_ngcontent-%COMP%]   p.file-requirements[_ngcontent-%COMP%]{margin-top:4px;font-size:12px;opacity:.7}.profile-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:var(--text-color)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:12px;border:1px solid var(--border-color);border-radius:var(--radius-md);font-size:15px;background-color:var(--card-background);color:var(--text-color);transition:all var(--transition-fast)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 2px #4caf5033}.form-group[_ngcontent-%COMP%]   input.invalid[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea.invalid[_ngcontent-%COMP%]{border-color:var(--error-color)}.error-message[_ngcontent-%COMP%]{color:var(--error-color);font-size:13px;margin-top:4px}.error-alert[_ngcontent-%COMP%], .success-alert[_ngcontent-%COMP%]{padding:12px;border-radius:var(--radius-md);font-size:14px;margin-bottom:16px;animation:_ngcontent-%COMP%_fadeIn .3s ease}.error-alert[_ngcontent-%COMP%]{background-color:rgba(var(--error-color-rgb, 229, 57, 53),.1);color:var(--error-color);border:1px solid rgba(var(--error-color-rgb, 229, 57, 53),.2)}.success-alert[_ngcontent-%COMP%]{background-color:rgba(var(--success-color-rgb, 67, 160, 71),.1);color:var(--success-color);border:1px solid rgba(var(--success-color-rgb, 67, 160, 71),.2)}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:16px}.save-btn[_ngcontent-%COMP%]{padding:10px 20px;background-color:var(--primary-color);color:#fff;border:none;border-radius:var(--radius-md);font-weight:500;font-size:15px;cursor:pointer;transition:all var(--transition-fast);display:flex;align-items:center;justify-content:center}.save-btn[_ngcontent-%COMP%]:hover{background-color:var(--primary-dark);transform:translateY(-2px);box-shadow:var(--shadow)}.save-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.save-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none;box-shadow:none}.spinner[_ngcontent-%COMP%]{display:inline-block;width:16px;height:16px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-right:8px}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}"]})};function ue(o,r){if(o&1&&(W(0),t(1,"span",18),a(2),n(),X()),o&2){let e=d().$implicit;s(2),Z(" (",e.label.split("(")[1]," ")}}function fe(o,r){if(o&1){let e=w();t(0,"div",13),p("click",function(){let l=O(e).$implicit,f=d();return y(f.setTheme(l.value))}),t(1,"div",14)(2,"span",8),a(3),n()(),t(4,"div",15)(5,"span",16),a(6),n(),m(7,ue,3,1,"ng-container",17),n()()}if(o&2){let e=r.$implicit,i=d();h("active",i.currentTheme===e.value),s(),Q("background-color",e.color),s(2),b(e.icon),s(3),b(e.label.split("(")[0].trim()),s(),c("ngIf",e.label.includes("("))}}function ve(o,r){if(o&1&&(t(0,"div",19),a(1),n()),o&2){let e=d();s(),b(e.errorMessage)}}function be(o,r){if(o&1&&(t(0,"div",20),a(1),n()),o&2){let e=d();s(),b(e.successMessage)}}var B=class o{constructor(r,e){this.themeService=r;this.userService=e}user=null;availableThemes=[{value:"light",label:"Light Mode",color:"#ffffff",icon:"light_mode"},{value:"dark",label:"Dark Mode",color:"#242526",icon:"dark_mode"},{value:"night-blue",label:"Night Blue",color:"#2c3e50",icon:"nightlight"},{value:"green-grass",label:"Soft Green ( Good for Eyes )",color:"#4caf50",icon:"grass"}];currentTheme="light";displayMode="default";errorMessage="";successMessage="";isSubmitting=!1;ngOnInit(){this.themeService.currentTheme$.subscribe(e=>{this.currentTheme=e}),this.user&&this.user.theme&&(this.currentTheme=this.themeService.getUiThemeValue(this.user.theme));let r=localStorage.getItem("displayMode");r&&(this.displayMode=r)}setTheme(r){if(!this.user||this.isSubmitting)return;this.isSubmitting=!0,this.errorMessage="",this.successMessage="",this.currentTheme=r;let e=this.themeService.getDbThemeValue(r),i={theme:e};this.userService.updateUserProfile(this.user.id,i).pipe(P(()=>this.isSubmitting=!1)).subscribe({next:l=>{l&&(this.themeService.setTheme(r),this.user&&(this.user.theme=e),this.successMessage="Theme updated successfully",setTimeout(()=>{this.successMessage=""},3e3))},error:l=>{console.error("Error updating theme:",l),this.errorMessage="Failed to update theme",setTimeout(()=>{this.errorMessage=""},3e3)}})}setDisplayMode(r){this.displayMode=r,localStorage.setItem("displayMode",r),document.body.classList.remove("display-default","display-compact"),document.body.classList.add(`display-${r}`),this.successMessage="Display mode updated successfully",setTimeout(()=>{this.successMessage=""},3e3)}isThemeActive(r){return this.currentTheme===r}isDisplayModeActive(r){return this.displayMode===r}static \u0275fac=function(e){return new(e||o)(g(ne),g(S))};static \u0275cmp=v({type:o,selectors:[["app-appearance-settings"]],inputs:{user:"user"},standalone:!0,features:[x],decls:30,vars:7,consts:[[1,"appearance-settings"],[1,"settings-section"],[1,"section-description"],[1,"theme-options"],["class","theme-option",3,"active","click",4,"ngFor","ngForOf"],[1,"display-options"],[1,"display-option",3,"click"],[1,"option-preview","default-preview"],[1,"material-icons"],[1,"option-label"],[1,"option-preview","compact-preview"],["class","error-alert",4,"ngIf"],["class","success-alert",4,"ngIf"],[1,"theme-option",3,"click"],[1,"theme-color"],[1,"theme-label"],[1,"label-title"],[4,"ngIf"],[1,"label-subtitle"],[1,"error-alert"],[1,"success-alert"]],template:function(e,i){e&1&&(t(0,"div",0)(1,"h3"),a(2,"Appearance Settings"),n(),t(3,"div",1)(4,"h4"),a(5,"Theme"),n(),t(6,"p",2),a(7,"Choose the color theme for your Grasslandia experience."),n(),t(8,"div",3),m(9,fe,8,7,"div",4),n()(),t(10,"div",1)(11,"h4"),a(12,"Display Mode"),n(),t(13,"p",2),a(14,"Choose how you want content to be displayed."),n(),t(15,"div",5)(16,"div",6),p("click",function(){return i.setDisplayMode("default")}),t(17,"div",7)(18,"span",8),a(19,"view_agenda"),n()(),t(20,"div",9),a(21,"Default"),n()(),t(22,"div",6),p("click",function(){return i.setDisplayMode("compact")}),t(23,"div",10)(24,"span",8),a(25,"view_compact"),n()(),t(26,"div",9),a(27,"Compact"),n()()()(),m(28,ve,2,1,"div",11)(29,be,2,1,"div",12),n()),e&2&&(s(9),c("ngForOf",i.availableThemes),s(7),h("active",i.displayMode==="default"),s(6),h("active",i.displayMode==="compact"),s(6),c("ngIf",i.errorMessage),s(),c("ngIf",i.successMessage))},dependencies:[_,ee,C],styles:[".appearance-settings[_ngcontent-%COMP%]{max-width:600px;animation:_ngcontent-%COMP%_fadeIn .3s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.settings-section[_ngcontent-%COMP%]{margin-bottom:32px;padding-bottom:32px;border-bottom:1px solid var(--border-color)}.settings-section[_ngcontent-%COMP%]:last-child{border-bottom:none;padding-bottom:0}h3[_ngcontent-%COMP%]{font-size:24px;font-weight:600;margin-bottom:24px;color:var(--text-color)}h4[_ngcontent-%COMP%]{font-size:18px;font-weight:500;margin-bottom:8px;color:var(--text-color)}.section-description[_ngcontent-%COMP%]{font-size:14px;color:var(--text-color);opacity:.8;margin-bottom:16px;line-height:1.5}.theme-options[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:16px;margin-top:20px}.theme-option[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:12px;cursor:pointer;transition:all var(--transition-normal);padding:16px;border-radius:var(--radius-md);background-color:var(--card-background);border:2px solid transparent}.theme-option[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:var(--shadow-hover)}.theme-option.active[_ngcontent-%COMP%]{border-color:var(--primary-color);background-color:var(--hover-color)}.theme-color[_ngcontent-%COMP%]{width:70px;height:70px;border-radius:var(--radius-full);display:flex;align-items:center;justify-content:center;box-shadow:var(--shadow);transition:transform var(--transition-normal)}.theme-color[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:28px;color:#fff;opacity:.9}.theme-option[_ngcontent-%COMP%]:hover   .theme-color[_ngcontent-%COMP%]{transform:scale(1.1)}.theme-label[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center}.theme-label[_ngcontent-%COMP%]   .label-title[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:var(--text-color);line-height:1.2}.theme-label[_ngcontent-%COMP%]   .label-subtitle[_ngcontent-%COMP%]{font-size:12px;color:var(--text-color);opacity:.7;margin-top:4px;line-height:1.2}.display-options[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:16px;margin-top:20px}.display-option[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:12px;cursor:pointer;padding:16px;border-radius:var(--radius-md);background-color:var(--card-background);border:2px solid transparent;transition:all var(--transition-normal)}.display-option[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:var(--shadow-hover)}.display-option.active[_ngcontent-%COMP%]{border-color:var(--primary-color);background-color:var(--hover-color)}.option-preview[_ngcontent-%COMP%]{width:80px;height:60px;border-radius:var(--radius-md);background-color:var(--secondary-color);display:flex;align-items:center;justify-content:center;transition:transform var(--transition-normal)}.display-option[_ngcontent-%COMP%]:hover   .option-preview[_ngcontent-%COMP%]{transform:scale(1.1)}.option-preview[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:24px;color:var(--primary-color)}.option-label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:var(--text-color)}.error-alert[_ngcontent-%COMP%], .success-alert[_ngcontent-%COMP%]{padding:12px;border-radius:var(--radius-md);font-size:14px;margin-top:16px;animation:_ngcontent-%COMP%_fadeIn .3s ease}.error-alert[_ngcontent-%COMP%]{background-color:rgba(var(--error-color-rgb, 229, 57, 53),.1);color:var(--error-color);border:1px solid rgba(var(--error-color-rgb, 229, 57, 53),.2)}.success-alert[_ngcontent-%COMP%]{background-color:rgba(var(--success-color-rgb, 67, 160, 71),.1);color:var(--success-color);border:1px solid rgba(var(--success-color-rgb, 67, 160, 71),.2)}"]})};function he(o,r){if(o&1){let e=w();t(0,"button",5),p("click",function(){O(e);let l=d();return y(l.toggleDeleteConfirmation())}),a(1," Delete Account "),n()}}function Ce(o,r){if(o&1&&(t(0,"div",17),a(1),n()),o&2){let e=d(2);s(),b(e.errorMessage)}}function Me(o,r){o&1&&(t(0,"span"),a(1,"I understand, delete my account"),n())}function Pe(o,r){o&1&&u(0,"span",18)}function Oe(o,r){if(o&1){let e=w();t(0,"div",6)(1,"h5"),a(2,"Are you absolutely sure?"),n(),t(3,"p"),a(4," This action cannot be undone. This will permanently delete your account and remove all your data from our servers. "),n(),t(5,"form",7),p("ngSubmit",function(){O(e);let l=d();return y(l.onDeleteAccount())}),t(6,"div",8)(7,"label",9),a(8,' To confirm, type "DELETE" in the box below: '),n(),u(9,"input",10),n(),m(10,Ce,2,1,"div",11),t(11,"div",12)(12,"button",13),p("click",function(){O(e);let l=d();return y(l.toggleDeleteConfirmation())}),a(13," Cancel "),n(),t(14,"button",14),m(15,Me,2,0,"span",15)(16,Pe,1,0,"span",16),n()()()()}if(o&2){let e=d();s(5),c("formGroup",e.deleteAccountForm),s(5),c("ngIf",e.errorMessage),s(2),c("disabled",e.isDeleting),s(2),c("disabled",e.deleteAccountForm.invalid||e.isDeleting),s(),c("ngIf",!e.isDeleting),s(),c("ngIf",e.isDeleting)}}var q=class o{constructor(r,e,i){this.fb=r;this.authService=e;this.router=i;this.deleteAccountForm=this.fb.group({confirmation:["",[M.required,M.pattern("DELETE")]]})}user=null;deleteAccountForm;showDeleteConfirmation=!1;isDeleting=!1;errorMessage="";toggleDeleteConfirmation(){this.showDeleteConfirmation=!this.showDeleteConfirmation,this.showDeleteConfirmation||(this.deleteAccountForm.reset(),this.errorMessage="")}onDeleteAccount(){this.deleteAccountForm.invalid||!this.user||(this.isDeleting=!0,this.errorMessage="",this.deleteUserAccount().pipe(P(()=>this.isDeleting=!1)).subscribe({next:()=>{this.authService.signOut().subscribe(()=>{this.router.navigate(["/"])})},error:r=>{console.error("Error deleting account:",r),this.errorMessage="Failed to delete account. Please try again."}}))}deleteUserAccount(){return this.authService.deleteAccount()}static \u0275fac=function(e){return new(e||o)(g(D),g(j),g(k))};static \u0275cmp=v({type:o,selectors:[["app-account-settings"]],inputs:{user:"user"},standalone:!0,features:[x],decls:10,vars:2,consts:[[1,"account-settings"],[1,"settings-section"],[1,"section-description"],["class","delete-account-btn",3,"click",4,"ngIf"],["class","delete-confirmation",4,"ngIf"],[1,"delete-account-btn",3,"click"],[1,"delete-confirmation"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","confirmation"],["type","text","id","confirmation","formControlName","confirmation","placeholder","DELETE"],["class","error-alert",4,"ngIf"],[1,"confirmation-actions"],["type","button",1,"cancel-btn",3,"click","disabled"],["type","submit",1,"confirm-delete-btn",3,"disabled"],[4,"ngIf"],["class","spinner",4,"ngIf"],[1,"error-alert"],[1,"spinner"]],template:function(e,i){e&1&&(t(0,"div",0)(1,"h3"),a(2,"Account Settings"),n(),t(3,"div",1)(4,"h4"),a(5,"Delete Account"),n(),t(6,"p",2),a(7," Once you delete your account, there is no going back. Please be certain. "),n(),m(8,he,2,0,"button",3)(9,Oe,17,6,"div",4),n()()),e&2&&(s(8),c("ngIf",!i.showDeleteConfirmation),s(),c("ngIf",i.showDeleteConfirmation))},dependencies:[_,C,N,z,I,T,E,U,F,A],styles:[".account-settings[_ngcontent-%COMP%]{max-width:600px;animation:_ngcontent-%COMP%_fadeIn .3s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.settings-section[_ngcontent-%COMP%]{margin-bottom:32px;padding-bottom:32px;border-bottom:1px solid var(--border-color)}.settings-section[_ngcontent-%COMP%]:last-child{border-bottom:none;padding-bottom:0}h3[_ngcontent-%COMP%]{font-size:24px;font-weight:600;margin-bottom:24px;color:var(--text-color)}h4[_ngcontent-%COMP%]{font-size:18px;font-weight:500;margin-bottom:8px;color:var(--text-color)}h5[_ngcontent-%COMP%]{font-size:16px;font-weight:600;margin-bottom:8px;color:var(--error-color)}.section-description[_ngcontent-%COMP%]{font-size:14px;color:var(--text-color);opacity:.8;margin-bottom:16px;line-height:1.5}.delete-account-btn[_ngcontent-%COMP%]{padding:10px 18px;background-color:var(--error-color);color:#fff;border:none;border-radius:var(--radius-md);font-weight:500;font-size:14px;cursor:pointer;transition:all var(--transition-fast)}.delete-account-btn[_ngcontent-%COMP%]:hover{background-color:rgba(var(--error-color-rgb, 229, 57, 53),.9);transform:translateY(-2px);box-shadow:0 4px 8px rgba(var(--error-color-rgb, 229, 57, 53),.3)}.delete-account-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.delete-confirmation[_ngcontent-%COMP%]{background-color:rgba(var(--error-color-rgb, 229, 57, 53),.1);border:1px solid rgba(var(--error-color-rgb, 229, 57, 53),.3);border-radius:var(--radius-md);padding:20px;margin-top:16px;animation:_ngcontent-%COMP%_shake .5s cubic-bezier(.36,.07,.19,.97) both}@keyframes _ngcontent-%COMP%_shake{10%,90%{transform:translate3d(-1px,0,0)}20%,80%{transform:translate3d(2px,0,0)}30%,50%,70%{transform:translate3d(-4px,0,0)}40%,60%{transform:translate3d(4px,0,0)}}.delete-confirmation[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;margin-bottom:16px;color:var(--error-color);line-height:1.5}.form-group[_ngcontent-%COMP%]{margin-bottom:16px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:14px;margin-bottom:8px;font-weight:500;color:var(--text-color)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid var(--border-color);border-radius:var(--radius-md);font-size:15px;background-color:var(--card-background);color:var(--text-color);transition:all var(--transition-fast)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--error-color);box-shadow:0 0 0 2px rgba(var(--error-color-rgb, 229, 57, 53),.2)}.error-alert[_ngcontent-%COMP%]{padding:12px;background-color:rgba(var(--error-color-rgb, 229, 57, 53),.1);color:var(--error-color);border:1px solid rgba(var(--error-color-rgb, 229, 57, 53),.2);border-radius:var(--radius-md);font-size:14px;margin-bottom:16px;line-height:1.5}.confirmation-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-top:20px}.cancel-btn[_ngcontent-%COMP%]{padding:8px 16px;background-color:var(--hover-color);color:var(--text-color);border:none;border-radius:var(--radius-md);font-weight:500;font-size:14px;cursor:pointer;transition:all var(--transition-fast)}.cancel-btn[_ngcontent-%COMP%]:hover{background-color:var(--secondary-color);transform:translateY(-2px)}.cancel-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.cancel-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.confirm-delete-btn[_ngcontent-%COMP%]{padding:8px 16px;background-color:var(--error-color);color:#fff;border:none;border-radius:var(--radius-md);font-weight:500;font-size:14px;cursor:pointer;transition:all var(--transition-fast);display:flex;align-items:center;justify-content:center}.confirm-delete-btn[_ngcontent-%COMP%]:hover{background-color:rgba(var(--error-color-rgb, 229, 57, 53),.9);transform:translateY(-2px);box-shadow:0 4px 8px rgba(var(--error-color-rgb, 229, 57, 53),.3)}.confirm-delete-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.confirm-delete-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none;box-shadow:none}.spinner[_ngcontent-%COMP%]{display:inline-block;width:16px;height:16px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}"]})};function ye(o,r){if(o&1&&(t(0,"div",13),u(1,"app-profile-settings",14),n()),o&2){let e=d();s(),c("user",e.user)}}function Se(o,r){if(o&1&&(t(0,"div",13),u(1,"app-appearance-settings",14),n()),o&2){let e=d();s(),c("user",e.user)}}function we(o,r){if(o&1&&(t(0,"div",13),u(1,"app-account-settings",14),n()),o&2){let e=d();s(),c("user",e.user)}}var L=class o{user=null;close=new J;activeTab="profile";constructor(){}setActiveTab(r){this.activeTab=r}closeModal(){this.close.emit()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=v({type:o,selectors:[["app-settings-modal"]],inputs:{user:"user"},outputs:{close:"close"},standalone:!0,features:[x],decls:33,vars:9,consts:[[1,"settings-modal-overlay",3,"click"],[1,"settings-modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"material-icons"],[1,"modal-content"],[1,"settings-sidebar"],[1,"settings-nav"],[3,"click"],[1,"nav-icon","material-icons"],[1,"nav-text"],[1,"settings-main"],["class","settings-panel",4,"ngIf"],[1,"settings-panel"],[3,"user"]],template:function(e,i){e&1&&(t(0,"div",0),p("click",function(){return i.closeModal()}),t(1,"div",1),p("click",function(f){return f.stopPropagation()}),t(2,"div",2)(3,"h2"),a(4,"Settings"),n(),t(5,"button",3),p("click",function(){return i.closeModal()}),t(6,"span",4),a(7,"close"),n()()(),t(8,"div",5)(9,"div",6)(10,"ul",7)(11,"li")(12,"button",8),p("click",function(){return i.setActiveTab("profile")}),t(13,"span",9),a(14,"person"),n(),t(15,"span",10),a(16,"Profile"),n()()(),t(17,"li")(18,"button",8),p("click",function(){return i.setActiveTab("appearance")}),t(19,"span",9),a(20,"palette"),n(),t(21,"span",10),a(22,"Appearance"),n()()(),t(23,"li")(24,"button",8),p("click",function(){return i.setActiveTab("account")}),t(25,"span",9),a(26,"manage_accounts"),n(),t(27,"span",10),a(28,"Account"),n()()()()(),t(29,"div",11),m(30,ye,2,1,"div",12)(31,Se,2,1,"div",12)(32,we,2,1,"div",12),n()()()()),e&2&&(s(12),h("active",i.activeTab==="profile"),s(6),h("active",i.activeTab==="appearance"),s(6),h("active",i.activeTab==="account"),s(6),c("ngIf",i.activeTab==="profile"),s(),c("ngIf",i.activeTab==="appearance"),s(),c("ngIf",i.activeTab==="account"))},dependencies:[_,C,Y,B,q],styles:['.settings-modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#00000080;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);z-index:1000;display:flex;justify-content:center;align-items:center;animation:_ngcontent-%COMP%_fadeIn .25s cubic-bezier(.25,1,.5,1)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.settings-modal[_ngcontent-%COMP%]{width:92%;max-width:960px;height:92vh;max-height:750px;background-color:var(--card-background);border-radius:var(--radius-lg);box-shadow:0 10px 40px #0003;display:flex;flex-direction:column;overflow:hidden;animation:_ngcontent-%COMP%_slideIn .35s cubic-bezier(.34,1.56,.64,1);border:1px solid var(--border-color)}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-20px) scale(.96)}to{opacity:1;transform:translateY(0) scale(1)}}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:18px 24px;border-bottom:1px solid var(--border-color);background-color:var(--card-background)}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:22px;font-weight:600;margin:0;color:var(--text-color);display:flex;align-items:center}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:before{content:"";display:inline-block;width:8px;height:24px;background-color:var(--primary-color);margin-right:12px;border-radius:4px}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background:none;border:none;width:38px;height:38px;border-radius:var(--radius-full);cursor:pointer;transition:all var(--transition-fast);color:var(--text-color);opacity:.8}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{background-color:var(--hover-color);color:var(--primary-color);opacity:1;transform:rotate(90deg)}.modal-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:24px}.modal-content[_ngcontent-%COMP%]{display:flex;flex:1;overflow:hidden}.settings-sidebar[_ngcontent-%COMP%]{width:240px;background-color:var(--background-color);overflow-y:auto;border-right:1px solid var(--border-color)}.settings-nav[_ngcontent-%COMP%]{list-style-type:none;padding:20px 0;margin:0}.settings-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0;padding:0}.settings-nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;padding:14px 20px;background:none;border:none;text-align:left;font-size:15px;color:var(--text-color);opacity:.8;cursor:pointer;transition:all var(--transition-fast);border-radius:0;border-left:3px solid transparent}.settings-nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--hover-color);opacity:1}.settings-nav[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:var(--card-background);color:var(--primary-color);font-weight:600;opacity:1;border-left-color:var(--primary-color)}.settings-nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .nav-icon[_ngcontent-%COMP%]{margin-right:14px;font-size:20px;color:inherit}.settings-main[_ngcontent-%COMP%]{flex:1;padding:30px;overflow-y:auto;background-color:var(--background-color)}.settings-main[_ngcontent-%COMP%]   .settings-panel[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInSlideUp .3s ease}@keyframes _ngcontent-%COMP%_fadeInSlideUp{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.profile-settings[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .appearance-settings[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .account-settings[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:26px;font-weight:600;margin-bottom:28px;color:var(--text-color);position:relative;padding-bottom:10px}.profile-settings[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:after, .appearance-settings[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:after, .account-settings[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;width:40px;height:3px;background-color:var(--primary-color);border-radius:var(--radius-full)}.profile-picture-section[_ngcontent-%COMP%]{margin-bottom:32px;padding-bottom:32px;border-bottom:1px solid var(--border-color)}.profile-picture-container[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:28px}.current-picture[_ngcontent-%COMP%]{width:120px;height:120px;border-radius:var(--radius-full);overflow:hidden;border:3px solid var(--border-color);box-shadow:var(--shadow);position:relative;transition:all var(--transition-fast)}.current-picture[_ngcontent-%COMP%]:hover{border-color:var(--primary-color);transform:scale(1.05);box-shadow:0 8px 20px #00000026}.current-picture[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.settings-section[_ngcontent-%COMP%]{margin-bottom:40px;padding-bottom:32px;border-bottom:1px solid var(--border-color)}.settings-section[_ngcontent-%COMP%]:last-child{border-bottom:none;padding-bottom:0}h4[_ngcontent-%COMP%]{font-size:20px;font-weight:500;margin-bottom:12px;color:var(--text-color)}.section-description[_ngcontent-%COMP%]{font-size:15px;color:var(--text-color);opacity:.8;margin-bottom:20px;line-height:1.6}.form-group[_ngcontent-%COMP%]{margin-bottom:24px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:15px;margin-bottom:10px;font-weight:500;color:var(--text-color)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:14px;border:2px solid var(--border-color);border-radius:var(--radius-md);resize:vertical;font-size:15px;background-color:var(--card-background);color:var(--text-color);transition:all var(--transition-fast)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #4caf5026}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:120px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:24px}.save-btn[_ngcontent-%COMP%], .delete-account-btn[_ngcontent-%COMP%]{padding:12px 24px;border-radius:var(--radius-md);font-weight:600;font-size:15px;cursor:pointer;transition:all var(--transition-fast);display:flex;align-items:center;justify-content:center;border:none}.save-btn[_ngcontent-%COMP%]{background-color:var(--primary-color);color:#fff}.save-btn[_ngcontent-%COMP%]:hover{background-color:var(--primary-dark);transform:translateY(-2px);box-shadow:0 6px 15px #4caf5033}.save-btn[_ngcontent-%COMP%]:active{transform:translateY(-1px)}.save-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none;box-shadow:none}.delete-account-btn[_ngcontent-%COMP%]{background-color:var(--error-color);color:#fff}.delete-account-btn[_ngcontent-%COMP%]:hover{background-color:rgba(var(--error-color-rgb, 229, 57, 53),.9);transform:translateY(-2px);box-shadow:0 6px 15px #e5393533}.delete-account-btn[_ngcontent-%COMP%]:active{transform:translateY(-1px)}.theme-options[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:20px;margin-top:24px}.theme-option[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:12px;cursor:pointer;transition:all var(--transition-normal);padding:20px;border-radius:var(--radius-md);background-color:var(--card-background);border:2px solid transparent;box-shadow:0 2px 8px #0000000d}.theme-option[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 10px 20px #0000001a}.theme-option.active[_ngcontent-%COMP%]{border-color:var(--primary-color);background-color:var(--hover-color)}.theme-color[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:var(--radius-md);display:flex;align-items:center;justify-content:center;box-shadow:0 4px 12px #00000026;transition:transform var(--transition-normal)}.theme-color[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:32px;color:#fff}.theme-option[_ngcontent-%COMP%]:hover   .theme-color[_ngcontent-%COMP%]{transform:scale(1.1)}.theme-label[_ngcontent-%COMP%]{font-size:15px;font-weight:600;color:var(--text-color)}.error-alert[_ngcontent-%COMP%], .success-alert[_ngcontent-%COMP%]{padding:16px;border-radius:var(--radius-md);font-size:15px;margin:20px 0;animation:_ngcontent-%COMP%_fadeIn .3s ease;display:flex;align-items:flex-start;line-height:1.5}.error-alert[_ngcontent-%COMP%]:before, .success-alert[_ngcontent-%COMP%]:before{font-family:Material Icons;margin-right:12px;font-size:20px}.error-alert[_ngcontent-%COMP%]{background-color:rgba(var(--error-color-rgb, 229, 57, 53),.1);color:var(--error-color);border-left:4px solid var(--error-color)}.error-alert[_ngcontent-%COMP%]:before{content:"error_outline"}.success-alert[_ngcontent-%COMP%]{background-color:rgba(var(--success-color-rgb, 67, 160, 71),.1);color:var(--success-color);border-left:4px solid var(--success-color)}.success-alert[_ngcontent-%COMP%]:before{content:"check_circle_outline"}.delete-confirmation[_ngcontent-%COMP%]{background-color:rgba(var(--error-color-rgb, 229, 57, 53),.08);border:1px solid rgba(var(--error-color-rgb, 229, 57, 53),.3);border-radius:var(--radius-md);padding:24px;margin-top:20px;animation:_ngcontent-%COMP%_pulseAttention .5s cubic-bezier(.36,.07,.19,.97) both}@keyframes _ngcontent-%COMP%_pulseAttention{10%,90%{transform:translate3d(-2px,0,0)}20%,80%{transform:translate3d(3px,0,0)}30%,50%,70%{transform:translate3d(-5px,0,0)}40%,60%{transform:translate3d(5px,0,0)}}.delete-confirmation[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:18px;font-weight:600;margin-bottom:12px;color:var(--error-color);display:flex;align-items:center}.delete-confirmation[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]:before{content:"warning";font-family:Material Icons;margin-right:10px;font-size:20px}.delete-confirmation[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:15px;margin-bottom:20px;color:var(--text-color);line-height:1.6}@media (max-width: 960px){.settings-sidebar[_ngcontent-%COMP%]{width:200px}.settings-main[_ngcontent-%COMP%]{padding:20px}}@media (max-width: 768px){.modal-content[_ngcontent-%COMP%]{flex-direction:column}.settings-sidebar[_ngcontent-%COMP%]{width:100%;border-right:none;border-bottom:1px solid var(--border-color);max-height:80px}.settings-nav[_ngcontent-%COMP%]{display:flex;overflow-x:auto;padding:10px}.settings-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{flex-shrink:0}.settings-nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 12px;flex-direction:column;border-left:none;border-bottom:3px solid transparent}.settings-nav[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{border-left-color:transparent;border-bottom-color:var(--primary-color)}.settings-nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .nav-icon[_ngcontent-%COMP%]{margin-right:0;margin-bottom:4px}.settings-nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .nav-text[_ngcontent-%COMP%]{font-size:12px}.profile-picture-container[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.theme-options[_ngcontent-%COMP%], .display-options[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(130px,1fr))}}']})};var re=class o{constructor(r,e,i){this.userService=r;this.authService=e;this.router=i}currentUser=null;ngOnInit(){if(!this.authService.isAuthenticated()){this.router.navigate(["/signin"]);return}this.userService.getCurrentUserProfile().subscribe({next:r=>{this.currentUser=r},error:r=>{console.error("Error loading user profile:",r),this.router.navigate(["/"])}})}onCloseSettings(){this.router.navigate(["/"])}static \u0275fac=function(e){return new(e||o)(g(S),g(j),g(k))};static \u0275cmp=v({type:o,selectors:[["app-settings"]],standalone:!0,features:[x],decls:1,vars:1,consts:[[3,"close","user"]],template:function(e,i){e&1&&(t(0,"app-settings-modal",0),p("close",function(){return i.onCloseSettings()}),n()),e&2&&c("user",i.currentUser)},dependencies:[_,L],encapsulation:2})};export{re as SettingsComponent};
